{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/Springboot 원리/",
    "result": {"data":{"cur":{"id":"2ef52ac8-ca31-5434-8222-2a28b98de15c","html":"<p>자바의 서블릿 컨테이너(Tomcat)가 실행되고, 스프링 컨테이너도 실행된다.</p>\n<p>스프링 프로젝트를 처음 생성했을 때 모습.\nmain() 메서드 이외엔 크게 볼게 없다, 하지만 정말 그럴까? 보이는게 다가 아니라는게 알기에 @SpringbootApplication 기저에 깔린 여러 동작원리를 살펴보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// 최초의 모습</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span>autoconfigure<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SpringBootApplication</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@SpringBootApplication</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HellobootApplication</span> <span class=\"token punctuation\">{</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HellobootApplication</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>모든 imports 를 삭제하고, 어노테이션과 SpringApplication 도 삭제하여 main 메서드를 실행하면 아무일도 일어나지 않는다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HellobootApplication</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>톰캣 서블릿 컨테이너와 스프링 컨테이너 모두 실행되지 않은 것을 볼 수 있다.</p>\n<p>이제 <code class=\"language-text\">직접</code> 서블릿 컨테이너를 띄우고, 내부에 서블릿을 추가해보자.\n여기서 서블릿이란 서블릿 컨테이너에 들어가는 웹 컴포넌트를 의미한다.</p>\n<p>우선 빈(empty) 서블릿 컨테이너를 띄워보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>embedded<span class=\"token punctuation\">.</span>tomcat<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">TomcatServletWebServerFactory</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">WebServer</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>servlet<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ServletWebServerFactory</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HellobootApplication</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">ServletWebServerFactory</span> serverFactory <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TomcatServletWebServerFactory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">WebServer</span> webServer <span class=\"token operator\">=</span> serverFactory<span class=\"token punctuation\">.</span><span class=\"token function\">getWebServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        webServer<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>WebserFactory 를 상속받는 ServletWebFactory <code class=\"language-text\">팩토리</code> 인터페이스가 등장한다. 내부에는 getWebServer() 추상 메서드가 정의돼 있습니다.\ngetWebServer() 메서드는 주석에도 나왔듯 설정이 완료된<code class=\"language-text\">fully configured</code> 일시정지<code class=\"language-text\">paused</code> 상태의 WebServer 인스턴스를 생성합니다. 즉 실행되기 전 상태의 WebServer 인스턴스.\n<img src=\"https://velog.velcdn.com/images/tbnsok40/post/fc470a62-a7e2-4e88-9432-fb8a04290888/image.png\" alt=\"\"></p>\n<p>그렇게 생성된 webServer의 start() 를 호출하면 톰캣 서블릿 컨테이너가 실행됩니다.\n<img src=\"https://velog.velcdn.com/images/tbnsok40/post/be2da107-afe1-4355-a3c0-8cbfceb326a7/image.png\" alt=\"\"></p>\n<p>서블릿 컨테이너가 생성됐으니, 컨테이너에 들어갈 컴포넌트(서블릿)를 생성해보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HellobootApplication</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">ServletWebServerFactory</span> serverFactory <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TomcatServletWebServerFactory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">WebServer</span> webServer <span class=\"token operator\">=</span> serverFactory<span class=\"token punctuation\">.</span><span class=\"token function\">getWebServer</span><span class=\"token punctuation\">(</span>servletContext <span class=\"token operator\">-></span> <span class=\"token punctuation\">{</span>\n            servletContext<span class=\"token punctuation\">.</span><span class=\"token function\">addServlet</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HttpServlet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token annotation punctuation\">@Override</span>\n                <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">service</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> req<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpServletResponse</span> resp<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">ServletException</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">{</span>\n                    resp<span class=\"token punctuation\">.</span><span class=\"token function\">setStatus</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span>OK<span class=\"token punctuation\">.</span><span class=\"token function\">value</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    resp<span class=\"token punctuation\">.</span><span class=\"token function\">setHeader</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpHeaders</span><span class=\"token punctuation\">.</span>CONTENT_TYPE<span class=\"token punctuation\">,</span> <span class=\"token class-name\">MediaType</span><span class=\"token punctuation\">.</span>TEXT_PLAIN_VALUE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    resp<span class=\"token punctuation\">.</span><span class=\"token function\">getWriter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello Servlet\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">addMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/hello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        webServer<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>getWebServer() 의 인자에 람다식을 사용하여 서블릿을 추가합니다.\nservletContext.addServlet() 메서드는 첫번째 인자로 <code class=\"language-text\">서블릿의 이름을 문자열</code>로 받고, 두번째 인자로 <code class=\"language-text\">서블릿 인스턴스</code>를 받습니다.</p>\n<p>서블릿 인스턴스에 해당하는 HttpServlet() 만 분리한 코드입니다.\nResponse 는 <code class=\"language-text\">Status, Header, Body</code> 세 부분으로 이루어진 점을 고려해 응답할 정보를 resp 변수에 담는 것을 볼 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">new</span> <span class=\"token class-name\">HttpServlet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token annotation punctuation\">@Override</span>\n                <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">service</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> req<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpServletResponse</span> resp<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">ServletException</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">{</span>\n                    resp<span class=\"token punctuation\">.</span><span class=\"token function\">setStatus</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span>OK<span class=\"token punctuation\">.</span><span class=\"token function\">value</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    resp<span class=\"token punctuation\">.</span><span class=\"token function\">setHeader</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpHeaders</span><span class=\"token punctuation\">.</span>CONTENT_TYPE<span class=\"token punctuation\">,</span> <span class=\"token class-name\">MediaType</span><span class=\"token punctuation\">.</span>TEXT_PLAIN_VALUE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    resp<span class=\"token punctuation\">.</span><span class=\"token function\">getWriter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello Servlet\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span></code></pre></div>\n<p>그렇게 서블릿 컨테이너에 추가된 서블릿을 addMapping() 메서드를 사용해 <code class=\"language-text\">/hello</code> URL에 바인딩 합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">servletContext<span class=\"token punctuation\">.</span><span class=\"token function\">addServlet</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HttpServlet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token function\">addMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/hello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>생각해보면 new HttpServlet() 에 해당되는 내용은 우리가 흔히 사용하는 Controller의 역할을 하고 있습니다.</p>\n<h4 id=\"프론트-컨트롤러\" style=\"position:relative;\"><a href=\"#%ED%94%84%EB%A1%A0%ED%8A%B8-%EC%BB%A8%ED%8A%B8%EB%A1%A4%EB%9F%AC\" aria-label=\"프론트 컨트롤러 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>프론트 컨트롤러</h4>\n<ul>\n<li>역할 : 모든 서블릿에 등장하는 공통적인 처리(<code class=\"language-text\">인증, 보안, 다국어</code>)를 가장 앞단의 컨트롤러에서 담당. 즉 모든 웹 요청에 공통적으로 처리 필요한 요청을 처리.</li>\n<li>프론트 컨트롤러는 받은 모든 요청을 적절히 다른 컨트롤러에 <code class=\"language-text\">위임</code>한다.</li>\n</ul>\n<h3 id=\"스프링-컨테이너-사용\" style=\"position:relative;\"><a href=\"#%EC%8A%A4%ED%94%84%EB%A7%81-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EC%82%AC%EC%9A%A9\" aria-label=\"스프링 컨테이너 사용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>스프링 컨테이너 사용</h3>\n<ul>\n<li><code class=\"language-text\">컨테이너</code>는 여러 오브젝트를 보관하고 필요할 때 꺼내 사용할 수 있도록 관리한다.</li>\n<li>스프링 컨테이너의 동작방식</li>\n<li>크게 2가지 필요\n<ul>\n<li>POJO : 비즈니스 로직을 담당 (비즈니스 로직과 관련없는 클래스를 상속할 필요 X)</li>\n<li>Configuration Metadata : 컨테이너 구성 정보</li>\n</ul>\n</li>\n<li><strong>정리하면</strong> 스프링 컨테이너는 1) POJO 라는 Business Objects 와 2) Configuration Metadata 를 조합하여 서버 어플리케이션으로 사용할 수 있는 시스템을 만든다.\n<img src=\"https://velog.velcdn.com/images/tbnsok40/post/abe288ab-56f1-4fa7-bc75-82a2604b2af6/image.png\" alt=\"\"></li>\n</ul>\n<p>위 그림의 초록 상자, Full Configured System은 사실 스프링 컨테이너 내부에 위치한다.</p>\n<hr>\n<p><code class=\"language-text\">ApplicationContext</code> : 스프링 컨테이너를 대표하는 인터페이스. 개발자가 수동으로 스프링 컨테이너를 띄울 일이 생긴다면 기억해야 할 인터페이스로, ApplicationContext가 곧 Spring Container.</p>\n<p>registerBean() 메서드를 사용해 스프링 컨테이너에 등록할 오브젝트를 추가한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HellobootApplication</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n\t\t<span class=\"token comment\">//</span>\n        <span class=\"token class-name\">GenericApplicationContext</span> applicationContext <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">GenericApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        applicationContext<span class=\"token punctuation\">.</span><span class=\"token function\">registerBean</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HelloController</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        applicationContext<span class=\"token punctuation\">.</span><span class=\"token function\">registerBean</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SimpleHelloService</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        applicationContext<span class=\"token punctuation\">.</span><span class=\"token function\">refresh</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">ServletWebServerFactory</span> serverFactory <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TomcatServletWebServerFactory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">WebServer</span> webServer <span class=\"token operator\">=</span> serverFactory<span class=\"token punctuation\">.</span><span class=\"token function\">getWebServer</span><span class=\"token punctuation\">(</span>servletContext <span class=\"token operator\">-></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        webServer<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>아래 코드는 HelloController 클래스를 Bean 오브젝트로 생성을 의미한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">applicationContext<span class=\"token punctuation\">.</span><span class=\"token function\">registerBean</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HelloController</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// HelloController.class 라는 메타정보를 주입</span></code></pre></div>\n<p>이렇게 스프링 컨테이너에 빈이 등록되면, 서블릿 컨테이너에서 필요한 빈을 꺼내 사용(매핑)한다.</p>\n<ul>\n<li>applicationContext.registerBean() : 스프링의 구성정보를 만들 땐(bean 생성할 땐) 정확히 어떤 클래스를 가지고 만들 것인지 <code class=\"language-text\">구체 클래스</code>를 적어야 한다.</li>\n<li>어떤 빈을 만들던 순서는 고려하지 않아도 된다. 스프링 컨테이너가 자동으로 순서문제를 해결한다.</li>\n</ul>\n<h3 id=\"스프링-컨테이너는-싱글톤-빈을-생성\" style=\"position:relative;\"><a href=\"#%EC%8A%A4%ED%94%84%EB%A7%81-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88%EB%8A%94-%EC%8B%B1%EA%B8%80%ED%86%A4-%EB%B9%88%EC%9D%84-%EC%83%9D%EC%84%B1\" aria-label=\"스프링 컨테이너는 싱글톤 빈을 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>스프링 컨테이너는 싱글톤 빈을 생성</h3>\n<p><img src=\"https://velog.velcdn.com/images/tbnsok40/post/24535a45-3a1c-4dee-a03b-327eda562424/image.png\" alt=\"\"></p>\n<ul>\n<li>서블릿 컨테이너의 Front Controller(서블릿) 뿐만 아니라 다른 서블릿에서도 스프링 컨테이너의 HelloController(Bean) 오브젝트를 필요로 할 수 있다.</li>\n<li>이 때 필요할 때마다 새로운 HelloController Bean 을 생성하지 않고, 스프링 컨테이너가 단 한번 생성해둔 HelloController Bean 을 재사용하는 방식으로 동작한다 => <code class=\"language-text\">싱글톤</code></li>\n<li>스프링 컨테이너는 특별히 싱글톤 패턴을 구현하지 않지만 싱글톤 기능을 제공하기 때문에 스프링 컨테이너를 <code class=\"language-text\">싱글톤 레지스트리</code>라 부른다.</li>\n</ul>\n<h3 id=\"스프링-컨테이너의-역할\" style=\"position:relative;\"><a href=\"#%EC%8A%A4%ED%94%84%EB%A7%81-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88%EC%9D%98-%EC%97%AD%ED%95%A0\" aria-label=\"스프링 컨테이너의 역할 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>스프링 컨테이너의 역할</h3>\n<ul>\n<li>메타 정보를 주입하면 클래스의 싱글톤 오브젝트를 생성\n<ul>\n<li>주입 : 의존대상의 <code class=\"language-text\">레퍼런스</code>를 넘겨준다. 가장 잘 알려진 생성자 주입 방식으로 넘겨줄 수도 있고, 프로퍼티를 정의하여 setter로 레퍼런스를 넘겨줄 수도 있다.</li>\n</ul>\n</li>\n<li>생성할 오브젝트가 의존하는 다른 클래스가 있다면, 의존 대상 오브젝트를 주입하는 역할도 담당한다.</li>\n</ul>\n<p>아래 코드의 메커니즘을 요약하자면\n(1) Spring Container 생성\n(2) Spring Container 에 필요한 오브젝트 등록하여 <code class=\"language-text\">Bean</code> 생성\n(3) Servlet Container 내부에서는 필요한 Spring Bean 을 꺼내 사용하기 위해 <code class=\"language-text\">applicationContext.getBean(HelloController.class);</code> 호출\n(4) 비즈니스 로직은 getBean() 으로 꺼낸 helloController.hello()에 의해 처리되고, 그 결과를 응답 변수에 담아 클라이언트에게 리턴한다. (클라이언트에 리턴하는 로직은 해당 코드에 나타나지 않는다)</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HellobootApplication</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Spring Container 생성 - (1)</span>\n        <span class=\"token class-name\">GenericApplicationContext</span> applicationContext <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">GenericApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// Spring Container 에 Bean 등록(주입) - (2)</span>\n        applicationContext<span class=\"token punctuation\">.</span><span class=\"token function\">registerBean</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HelloController</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        applicationContext<span class=\"token punctuation\">.</span><span class=\"token function\">registerBean</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SimpleHelloService</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        applicationContext<span class=\"token punctuation\">.</span><span class=\"token function\">refresh</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">ServletWebServerFactory</span> serverFactory <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TomcatServletWebServerFactory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">WebServer</span> webServer <span class=\"token operator\">=</span> serverFactory<span class=\"token punctuation\">.</span><span class=\"token function\">getWebServer</span><span class=\"token punctuation\">(</span>servletContext <span class=\"token operator\">-></span> <span class=\"token punctuation\">{</span>\n            servletContext<span class=\"token punctuation\">.</span><span class=\"token function\">addServlet</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HttpServlet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token annotation punctuation\">@Override</span>\n                <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">service</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> req<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpServletResponse</span> resp<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">ServletException</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">.</span><span class=\"token function\">getRequestURI</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/hello\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> req<span class=\"token punctuation\">.</span><span class=\"token function\">getMethod</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpMethod</span><span class=\"token punctuation\">.</span>GET<span class=\"token punctuation\">.</span><span class=\"token function\">name</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                        <span class=\"token class-name\">String</span> name <span class=\"token operator\">=</span> req<span class=\"token punctuation\">.</span><span class=\"token function\">getParameter</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n                        <span class=\"token comment\">// Servlet Container 내부 Spring Container 에서 필요한 빈을 꺼내 사용 - (3)</span>\n                        <span class=\"token class-name\">HelloController</span> helloController <span class=\"token operator\">=</span> applicationContext<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HelloController</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                        <span class=\"token class-name\">String</span> ret <span class=\"token operator\">=</span> helloController<span class=\"token punctuation\">.</span><span class=\"token function\">hello</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n                        resp<span class=\"token punctuation\">.</span><span class=\"token function\">setContentType</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MediaType</span><span class=\"token punctuation\">.</span>TEXT_PLAIN_VALUE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                        resp<span class=\"token punctuation\">.</span><span class=\"token function\">getWriter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>ret<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token punctuation\">}</span>\n                    <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n                        resp<span class=\"token punctuation\">.</span><span class=\"token function\">setStatus</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span>NOT_FOUND<span class=\"token punctuation\">.</span><span class=\"token function\">value</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token punctuation\">}</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">addMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/*\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        webServer<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"dispatcherservlet-으로-전환\" style=\"position:relative;\"><a href=\"#dispatcherservlet-%EC%9C%BC%EB%A1%9C-%EC%A0%84%ED%99%98\" aria-label=\"dispatcherservlet 으로 전환 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DispatcherServlet 으로 전환</h3>\n<ul>\n<li>매핑/요청 파라미터 <code class=\"language-text\">바인딩</code> 등의 기능이 서블릿 컨테이너 코드 내부에 모두 드러난다 -> 서블릿 등록하는 코드를 모두 없애고 <code class=\"language-text\">DispatcherServlet</code>으로 대체한다.</li>\n<li>요약 : HttpServlet(Front Controller) -> DispatcherServlet 으로 대체</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// 기존</span>\n<span class=\"token class-name\">WebServer</span> webServer <span class=\"token operator\">=</span> serverFactory<span class=\"token punctuation\">.</span><span class=\"token function\">getWebServer</span><span class=\"token punctuation\">(</span>servletContext <span class=\"token operator\">-></span> <span class=\"token punctuation\">{</span>\n            servletContext<span class=\"token punctuation\">.</span><span class=\"token function\">addServlet</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HttpServlet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token annotation punctuation\">@Override</span>\n                <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">service</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> req<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpServletResponse</span> resp<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">ServletException</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token comment\">// 인증, 보안, 다국어, 공통 기능</span>\n                    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">.</span><span class=\"token function\">getRequestURI</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/hello\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> req<span class=\"token punctuation\">.</span><span class=\"token function\">getMethod</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpMethod</span><span class=\"token punctuation\">.</span>GET<span class=\"token punctuation\">.</span><span class=\"token function\">name</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                        <span class=\"token class-name\">String</span> name <span class=\"token operator\">=</span> req<span class=\"token punctuation\">.</span><span class=\"token function\">getParameter</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n                        <span class=\"token class-name\">HelloController</span> helloController <span class=\"token operator\">=</span> applicationContext<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HelloController</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                        <span class=\"token class-name\">String</span> ret <span class=\"token operator\">=</span> helloController<span class=\"token punctuation\">.</span><span class=\"token function\">hello</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n                        resp<span class=\"token punctuation\">.</span><span class=\"token function\">setContentType</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MediaType</span><span class=\"token punctuation\">.</span>TEXT_PLAIN_VALUE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                        resp<span class=\"token punctuation\">.</span><span class=\"token function\">getWriter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>ret<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token punctuation\">}</span>\n                    <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n                        resp<span class=\"token punctuation\">.</span><span class=\"token function\">setStatus</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span>NOT_FOUND<span class=\"token punctuation\">.</span><span class=\"token function\">value</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token punctuation\">}</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">addMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/*\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token comment\">// 개선</span>\n<span class=\"token class-name\">WebServer</span> webServer <span class=\"token operator\">=</span> serverFactory<span class=\"token punctuation\">.</span><span class=\"token function\">getWebServer</span><span class=\"token punctuation\">(</span>servletContext <span class=\"token operator\">-></span> <span class=\"token punctuation\">{</span>\n            servletContext<span class=\"token punctuation\">.</span><span class=\"token function\">addServlet</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"dispatcherServlet\"</span><span class=\"token punctuation\">,</span>\n\t\t\t\t\t\t\t\t\t\t<span class=\"token keyword\">new</span> <span class=\"token class-name\">DispatcherServlet</span><span class=\"token punctuation\">(</span>applicationContext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t\t\t\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">addMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/*\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Servlet Container에 hello 라는 개별 서블릿(HttpServlet)을 등록하는 대신 dispatcherServlet 을 등록하고 동시에 Spring Container 인 applicationContext 를 생성자 주입받는다. 이렇게 하면 스프링 컨테이너에 미리 등록된 Bean을 DispatcherServlet에서 인지할 수 있다.</p>\n<ul>\n<li>DispatcherServlet은 @RestController 가 붙어있으면, 모든 메서드에 @ResponesBody가 붙어있다고 간주한다.</li>\n</ul>\n<ul>\n<li>아래 코드는 두 부분으로 나뉜다.</li>\n<li>스프링 컨테이너가 먼저 만들어지고, 서블릿 컨테이너를 생성한다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n\t\t<span class=\"token comment\">// Spring Container생성 및 Bean 등록 (1)</span>\n        <span class=\"token class-name\">GenericWebApplicationContext</span> applicationContext <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">GenericWebApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        applicationContext<span class=\"token punctuation\">.</span><span class=\"token function\">registerBean</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HelloController</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        applicationContext<span class=\"token punctuation\">.</span><span class=\"token function\">registerBean</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SimpleHelloService</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        applicationContext<span class=\"token punctuation\">.</span><span class=\"token function\">refresh</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 스프링 컨테이너 초기화</span>\n\n\t\t<span class=\"token comment\">// ServletContainer 초기화 (2)</span>\n\t\t<span class=\"token comment\">// DispatcherServlet을 ServletContainer에 등록</span>\n        <span class=\"token class-name\">ServletWebServerFactory</span> serverFactory <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TomcatServletWebServerFactory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">WebServer</span> webServer <span class=\"token operator\">=</span> serverFactory<span class=\"token punctuation\">.</span><span class=\"token function\">getWebServer</span><span class=\"token punctuation\">(</span>servletContext <span class=\"token operator\">-></span> <span class=\"token punctuation\">{</span>\n            servletContext<span class=\"token punctuation\">.</span><span class=\"token function\">addServlet</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"dispatcherServlet\"</span><span class=\"token punctuation\">,</span>\n                            <span class=\"token keyword\">new</span> <span class=\"token class-name\">DispatcherServlet</span><span class=\"token punctuation\">(</span>applicationContext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                    <span class=\"token punctuation\">.</span><span class=\"token function\">addMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/*\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        webServer<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>","excerpt":"자바의 서블릿 컨테이너(Tomcat)가 실행되고, 스프링 컨테이너도 실행된다. 스프링 프로젝트를 처음 생성했을 때 모습.\nmain() 메서드 이외엔 크게 볼게 없다, 하지만 정말 그럴까? 보이는게 다가 아니라는게 알기에 @SpringbootApplication 기저에 깔린 여러 동작원리를 살펴보겠습니다. 모든 imports 를 삭제하고, 어노테이션과 SpringApplication 도 삭제하여 main 메서드를 실행하면 아무일도 일어나지 않는다. 톰캣 서블릿 컨테이너와 스프링 컨테이너 모두 실행되지 않은 것을 볼 수 있다. 이제  서블릿 컨테이너를 띄우고, 내부에 서블릿을 추가해보자.\n여기서 서블릿이란 서블릿 컨테이너에 들어가는 웹 컴포넌트를 의미한다. 우선 빈(empty) 서블릿 컨테이너를 띄워보자. WebserFactory 를 상속받는 ServletWebFactory  인터페이스가 등장한다. 내부에는 getWebServer() 추상 메서드가 정의돼 있습니다.\ngetWebServ…","frontmatter":{"date":"April 30, 2023","title":"Springboot 원리 알아가기","categories":"springboot","author":"Hoo","emoji":"🌿🤙🏻"},"fields":{"slug":"/Springboot 원리/"}},"next":{"id":"d57536af-65cf-57dd-b749-1dd65d9e8888","html":"<p>개발자가 된지 1년하고 2개월이 조금 지났습니다.\n2021년은 무얼 했는지, 또 다가오는 한 해는 어떻게 보낼지 정리해보았습니다.</p>\n<h2 id=\"1-올해의-강의\" style=\"position:relative;\"><a href=\"#1-%EC%98%AC%ED%95%B4%EC%9D%98-%EA%B0%95%EC%9D%98\" aria-label=\"1 올해의 강의 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 올해의 강의</h2>\n<p>인프런에서 강의를 많이 들었습니다. 부족한게 많은 신입이었기에, 개인 시간을 쪼개고 쪼개 강의를 듣고 모르는 부분을 채우는데 집중한 한 해였습니다.\n여러 강의를 들으면서 제가 배운점과, 느낀점을 간략히 기록했습니다.</p>\n<ol>\n<li><a href=\"https://www.inflearn.com/course/%ED%95%B5%EC%8B%AC%EA%B0%9C%EB%85%90-javascript-flow/dashboard\">코어 자바스크립트</a></li>\n</ol>\n<p>자바스크립트로 어느 정도 웹 서비스를 개발할 수 있는 수준이 되었지만, 그렇다고 이 언어를 잘 안다고는 말할 수 없는 어중간한 느낌을 인지했습니다.\n이 때 해당 강의를 들으면서 자바스크립트를 한층 더 깊게 이해할 수 있었습니다. 이 강의를 들으면서, <code class=\"language-text\">하나의 언어를 깊게 공부하는 재미</code>를 느꼈습니다.</p>\n<ol start=\"2\">\n<li><a href=\"https://www.inflearn.com/course/%EC%9B%B9-%EC%84%B1%EB%8A%A5-%EC%B5%9C%EC%A0%81%ED%99%94-%EB%A6%AC%EC%95%A1%ED%8A%B8-1/dashboard\">프론트엔드 개발자를 위한, 실전 웹 성능 최적화(feat. React) - Part. 1</a></li>\n</ol>\n<p>사이드 프로젝트의 성능 개선을 위해 수강했습니다. 결과적으로 기존의 60점이었던 구글 라이트 점수를 97점까지 끌어올릴 수 있었습니다.\n크롭 개발자 도구로 화면단의 성능을 결정할 요소를 파악하고, 적절한 개선방안을 찾을 수 있는 눈을 뜨게 해준 강의였습니다.</p>\n<ol start=\"3\">\n<li><a href=\"https://www.inflearn.com/course/%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C-%EA%B0%9C%EB%B0%9C%ED%99%98%EA%B2%BD/dashboard\">프론트엔드 개발환경의 이해와 실습</a></li>\n</ol>\n<p>개발팀에 저 혼자 있던 시간이 길었습니다. 프론트 개발환경 세팅을 지시받았는데, 혼자 감당해야한다는 사실에 부담을 많이 느꼈습니다.\n해당 강의를 들으면서 프론트엔드 개발환경의 필수 항목인 webpack 뿐만 아니라 babel, eslint 등 평소에 많이 들어봤지만 정확히 알지 못한 개념들을 익힐 수 있었습니다.</p>\n<ol start=\"4\">\n<li><a href=\"https://www.inflearn.com/course/http-%EC%9B%B9-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC/dashboard\">모든 개발자를 위한 HTTP 웹 기본 지식</a></li>\n</ol>\n<p>인프런 베스트셀러중 하나인 김영한 님의 HTTP 강좌입니다. 연초에 주말에도 회사에 나가 야금야금 강의를 들은 기억이 나네요(그 때 발이 많이 시렸는데..)\n코딩 위주의 개발만 공부하다 보니, HTTP 같은 웹 기반 지식은 매우 처참한 수준이었습니다. 이 강의를 들으면서 왜 개발자가 HTTP 같은 기반지식에도 관심을 기울여야하는지, 코딩 잘하는 것만이 개발을 잘하는게 아니라는 것을 배울 수 있었습니다.\n개발자로 커리어를 시작한지 3개월 차 때 해당 강의를 들었는데, 앞으로의 공부 방향을 잡을 수 있는 소중한 기회였다고 생각합니다.</p>\n<ol start=\"5\">\n<li><a href=\"https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%ED%95%B5%EC%8B%AC-%EC%9B%90%EB%A6%AC-%EA%B8%B0%EB%B3%B8%ED%8E%B8/dashboard\">스프링 핵심 원리 - 기본편</a></li>\n</ol>\n<p>사실 스프링 핵심 원리를 처음 완강했을 때는, <code class=\"language-text\">그래서 내가 할 수 있는게 뭐지</code> 라고 생각할 정도로 지식이 정리되지 않은 상태였습니다.\n한번만으로는 이해할 수 없는 강의라고 판단했고, 3월부터 2회째 수강을 시작하였습니다. 이 즈음에는 적어도 무엇을 배우고 있는지 감을 잡을 수 있었습니다.\n그리고 11월 부터 자바 기본서를 제대로 정독하기 시작했습니다.\n그 이후로 해당 강의의 3회독을 진행했는데, 이전과는 비교도 안될 정도로 내용 흡수력이 좋아졌습니다. 역시 기본이 탄탄해야함을 몸소 느낄 수 있었고, 스프링의 객체지향적 측면에서도 많은 배움을 얻었습니다.\n기세를 몰아 고급편도 얼른 수강하고 싶어졌습니다 :)</p>\n<br/>\n<h2 id=\"2-올해의-책\" style=\"position:relative;\"><a href=\"#2-%EC%98%AC%ED%95%B4%EC%9D%98-%EC%B1%85\" aria-label=\"2 올해의 책 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 올해의 책</h2>\n<p>취업준비생 시절엔 서점에 빼곡히 꽂혀있는 개발 서적을 보면서 <code class=\"language-text\">저걸 읽는 분들이 정말 있을까?</code> 생각을 많이 했습니다.\n당시에는 두꺼운 개발 서적을 읽기엔 실력도, 깊이도 모자랐기에, 받아들이기 편한 인터넷 강의를 주로 찾았습니다.\n올해부턴 현업에서 업무를 시작하게 됐고, 점차 아는 내용이 쌓이면서 자연스레 개발 서적에도 도전을 하게 됐습니다.</p>\n<ol>\n<li>자바의 신 1, 2권 (著 이상민)</li>\n<li>코어 자바스크립트 (著 정재남)</li>\n<li>스프링 입문을 위한 자바 객체 지향의 원리와 이해 (著 김종민)</li>\n</ol>\n<hr>\n<ol start=\"4\">\n<li>달까지 가자 (著 장류진)</li>\n<li>베로니카 죽기로 결심하다 (著 파울로 코엘료)</li>\n<li>시옷의 세계 (著 김소현)</li>\n<li>방금 떠나온 세계 (著 김초엽)</li>\n<li>어린이라는 세계 (著 김소영)</li>\n<li>없던 오늘 (著 유병욱)</li>\n<li>우리는 우리를 잊지 못하고 (著 김민철)</li>\n</ol>\n<br/>\n<p>… 개발도서는 상대적으로 적네요 분발해야겠습니다 ㅎ.ㅎ,, <br/></p>\n<p>자바의 신 기본서를 읽으면서, 책으로 배우는 개발이 생각보다 깊이를 쌓을 수 있는 시간이었습니다.\n개발자가 단지 코드만 치는 것 이상으로 업무를 해내려면 책을 읽고 끊임없이 질문을 던지고 사유하면서 더 공부해야한다고 느꼈습니다.\n요즘은 <code class=\"language-text\">스프링 입문을 위한 자바 객체 지향의 원리와 이해</code> 을 2회독 중인데, 이제서야 객체지향이 무엇인지, 스프링이 어떻게 객체지향을 몸소 구현하고 있는지 알게 됐습니다.</p>\n<p>개발 도서를 읽는 재미를 알게 됐으니 <code class=\"language-text\">올해</code>는 더 욕심내서 책을 읽으려고 합니다.\n꼭 읽고 싶은 책이 3권 있는데\n<code class=\"language-text\">1) 이펙티브 자바</code>\n<code class=\"language-text\">2) 클린 코드</code>\n<code class=\"language-text\">3) 리팩토링</code> 입니다. 욕심은 내되 깊이를 잃지 않는 독서를 하고 싶습니다.\n최근에 <code class=\"language-text\">스프링 입문을 위한 자바 객체 지향의 원리와 이해</code> 1회독을 하면서 아웃풋이 없는 독서는 힘이 약하다는 생각을 했습니다.\n적어도 2회독은 하면서 몰랐던 것과 새로 배운 것을 정리하는 습관을 꼭 길러야겠습니다.</p>\n<br/>\n<h2 id=\"3-올해의-사이드-프로젝트\" style=\"position:relative;\"><a href=\"#3-%EC%98%AC%ED%95%B4%EC%9D%98-%EC%82%AC%EC%9D%B4%EB%93%9C-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8\" aria-label=\"3 올해의 사이드 프로젝트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 올해의 사이드 프로젝트</h2>\n<h4 id=\"슬기로운-의사생활-심리테스트\" style=\"position:relative;\"><a href=\"#%EC%8A%AC%EA%B8%B0%EB%A1%9C%EC%9A%B4-%EC%9D%98%EC%82%AC%EC%83%9D%ED%99%9C-%EC%8B%AC%EB%A6%AC%ED%85%8C%EC%8A%A4%ED%8A%B8\" aria-label=\"슬기로운 의사생활 심리테스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://www.mbti-hospital-playlist.site/\">슬기로운 의사생활 심리테스트</a></h4>\n<p>첫 (제대로 된) 사이드 프로젝트로, 퍼블리싱 작업부터 배포까지 개발의 전 프로세스를 경험할 수 있었습니다.\n함께 기획하고 계획을 세워준 봉과 일러스트도 담당하여 프로젝트의 퀄리티를 높여준 뚜 까지, 두 친구 덕분에 무사히 프로젝트를 마무리할 수 있었습니다.\n<br/>\n기억에 남는 점으로는, 퍼블리싱 작업이 생각보다 쉽지 않았습니다.\n여기에 힘을 많이 쏟을 생각이 아니었는데 생각외로 발목을 많이 잡았고 개발 기간이 늘어나는 원인 중 하나가 되었습니다.\n내년에도 혼자 사이드 프로젝트를 진행해야한다면, 기본적인 마크업 작업을 잘할 수 있도록 강의를 하나 들어보고 싶습니다.</p>\n<p>비록 홍보가 잘 되지 않아 많은 트래픽은 경험하지 못했지만, 다음 사이드 프로젝트를 개발할 때는 어떻게 접근하고 설계해야할지 청사진을 그릴 수 있는 발팜이 됐습니다.\n첫 프로젝트인 만큼 코드적인 면에서도 아쉬운 점이 많았습니다. 2022년 목표 중 하나는 해당 프로젝트를 꼭 리팩토링하여 클린한 코드로 변모시키고 싶습니다.</p>\n<p>올해는 작년에 아쉽게 참가하지 못했던 오픈소스 컨트리뷰톤에 꼭 참여하고 싶은 목표가 생겼습니다.\n더 정확히 말하면 오픈소스에 기여해보는 것인데, 컨트리뷰톤을 시작으로 차근차근 도전해보겠습니다.</p>\n<ul>\n<li>재밌는 사이드 프로젝트를 준비중인 분이 계시다면 백엔드 한명(저) 채가세요 :) ㅎ.ㅎ</li>\n</ul>\n<br/>\n<h2 id=\"4-올해의-모임\" style=\"position:relative;\"><a href=\"#4-%EC%98%AC%ED%95%B4%EC%9D%98-%EB%AA%A8%EC%9E%84\" aria-label=\"4 올해의 모임 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. 올해의 모임</h2>\n<h4 id=\"글또-6기\" style=\"position:relative;\"><a href=\"#%EA%B8%80%EB%98%90-6%EA%B8%B0\" aria-label=\"글또 6기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>글또 6기</h4>\n<p>개발자 글쓰기 모임인 글또(<code class=\"language-text\">글</code>쓰는 <code class=\"language-text\">또</code>라이가 세상을 바꾼다) 6기에 참여했습니다. 비록 한번도 대면한 적은 없지만, 묘한 유대감을 느끼게 해준 모임입니다.\n2주에 한번씩 꾸준히 글을 발행한다는게, 처음엔 그리 어려운 일이 아니라고 생각했는데, 시간이 지나면서\n다들 개발에 진심인 분들인 만큼 배울 점도 얻어가는 점도 많았기에 꼭 다음 기수에도 참여하고 싶네요:)\n<br/>\n글또 이전과 이후의 글들을 비교해보았는데, 질적으로나 양적으로도 더 성숙한 포스팅을 뽑아낼 수 있었습니다.\n이전엔 간단한 버그 픽싱과 소소한 팁 위주로 쓰는 글이 대부분이었다면, 글또를 시작하면서 더 깊이 있는 내용의 글을 쓰려고 노력했습니다.\n올해는 개발하면서 맞닥뜨리는 문제들을 직접 해결하고 정리하는 글로 블로그를 더 채워가고 싶습니다.</p>\n<h2 id=\"5-올해의-블로그\" style=\"position:relative;\"><a href=\"#5-%EC%98%AC%ED%95%B4%EC%9D%98-%EB%B8%94%EB%A1%9C%EA%B7%B8\" aria-label=\"5 올해의 블로그 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. 올해의 블로그</h2>\n<h4 id=\"티스토리\" style=\"position:relative;\"><a href=\"#%ED%8B%B0%EC%8A%A4%ED%86%A0%EB%A6%AC\" aria-label=\"티스토리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>티스토리</h4>\n<p>글또를 시작하면서 본격적으로 <a href=\"https://junior-datalist.tistory.com\">블로그</a>에 글을 작성했습니다. 작고 귀여운 숫자지만 7월에 비하면 월간 방문자 수가 비약적으로 늘어난 것을 확인할 수 있었습니다.\n초반에는 자바스크립트 관련 내용을 많이 정리했는데, 주로 nest.js 트러블 슈팅 관련 포스팅이 인기를 끌었습니다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHvmIqq/8QAFxABAAMAAAAAAAAAAAAAAAAAEAEhMf/aAAgBAQABBQItjP/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABoQAAEFAQAAAAAAAAAAAAAAAAEAEBEhMYH/2gAIAQEAAT8hhrWCBxpWC//aAAwDAQACAAMAAAAQGA//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPxBn/8QAGxABAAEFAQAAAAAAAAAAAAAAAREAEDFBUcH/2gAIAQEAAT8QNnNS8aMRHTL20hibT//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2022-2\"\n        title=\"2022-2\"\n        src=\"/static/12c3417b8117197e5deb5aad6f6cea22/80e3c/2022-2.jpg\"\n        srcset=\"/static/12c3417b8117197e5deb5aad6f6cea22/4ec73/2022-2.jpg 180w,\n/static/12c3417b8117197e5deb5aad6f6cea22/158ba/2022-2.jpg 360w,\n/static/12c3417b8117197e5deb5aad6f6cea22/80e3c/2022-2.jpg 720w,\n/static/12c3417b8117197e5deb5aad6f6cea22/a92c5/2022-2.jpg 883w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>하반기 부터는 java 기본 관련 내용을 포스팅했고, 내년에도 그 방향을 쭉 이어나갈 생각입니다.\n<code class=\"language-text\">가독성</code> 과 <code class=\"language-text\">정확성</code>에 신경을 많이 썼고, 댓글로 쉽게 잘 이해할 수 있었단 말을 들을 때 가장 기분이 좋았습니다.\n영어 학원과 멋쟁이 사자처럼 직장인 에서 보조강사로 일한 경험이 있는데, 당시에도 쉽고 차분하게 가르쳐준다는 피드백을 받았을 때,\n제가 잘할 수 있는 부분이 이것이라고 느꼈습니다. 앞으로의 포스팅에서도 이런 강점을 잘 살려 꾸준히 글을 발행하고 싶습니다.</p>\n<h4 id=\"개인-블로그\" style=\"position:relative;\"><a href=\"#%EA%B0%9C%EC%9D%B8-%EB%B8%94%EB%A1%9C%EA%B7%B8\" aria-label=\"개인 블로그 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>개인 블로그</h4>\n<p>티스토리 블로그는 많은 편의성을 제공하지만, 역설적이게 그에 따른 불편함도 존재합니다. 마크다운 이용이 쉽지 않다는 점과, 코드 블록을 사용하기 위해 매번 번거로운 클릭을 해야한다는 점이 불편했습니다.\n그래서 올해부터는 새로운 블로그에서 글을 올릴 생각입니다. 개인 블로그인 만큼 저를 대표하는 또 하나의 홈페이지가 생긴 것 같아, 이전보다 더 양질의 글을 뽑아야 겠다는 다짐도 들었습니다.\n블로그 호스팅은 github page를 이용했고 테마는 <a href=\"https://www.zoomkoding.com/gatsby-github-blog/\">zoomkoding</a> 님이 만든 gatsby 를 선택했습니다. 깔끔하고 심플한 블로그를 사용할 수 있게 해준 줌코딩님께 소소한 감사를 표합니다 :)\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAEFBP/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAbClsnmcP//EABwQAAICAgMAAAAAAAAAAAAAAAECAAMEFQUREv/aAAgBAQABBQLwnRVAeRAGRsUmySZVwvt//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAHBAAAgEFAQAAAAAAAAAAAAAAAAEhAhESIjKR/9oACAEBAAY/AlovBLBSQranFRxUZJWg/8QAGxABAAICAwAAAAAAAAAAAAAAAQARITFhofH/2gAIAQEAAT8hOEYudXrRiCwhTRKgDonpEsEGGZ//2gAMAwEAAgADAAAAEIPP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGxABAQEAAgMAAAAAAAAAAAAAAREAITFBwdH/2gAIAQEAAT8QNRKOi+sZryiXC6gyEAO3HGCI1w82A2eCYvC/d//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2022-3\"\n        title=\"2022-3\"\n        src=\"/static/68537c12fea619fc87ff5d573a0c4c80/80e3c/2022-3.jpg\"\n        srcset=\"/static/68537c12fea619fc87ff5d573a0c4c80/4ec73/2022-3.jpg 180w,\n/static/68537c12fea619fc87ff5d573a0c4c80/158ba/2022-3.jpg 360w,\n/static/68537c12fea619fc87ff5d573a0c4c80/80e3c/2022-3.jpg 720w,\n/static/68537c12fea619fc87ff5d573a0c4c80/47311/2022-3.jpg 1080w,\n/static/68537c12fea619fc87ff5d573a0c4c80/43bc5/2022-3.jpg 1214w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br/>\n<h2 id=\"5-올해의-운동\" style=\"position:relative;\"><a href=\"#5-%EC%98%AC%ED%95%B4%EC%9D%98-%EC%9A%B4%EB%8F%99\" aria-label=\"5 올해의 운동 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. 올해의 운동</h2>\n<h4 id=\"크로스핏-feat-holixground\" style=\"position:relative;\"><a href=\"#%ED%81%AC%EB%A1%9C%EC%8A%A4%ED%95%8F-feat-holixground\" aria-label=\"크로스핏 feat holixground permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>크로스핏 (feat. HOLIXGROUND)</h4>\n<p><a href=\"https://www.instagram.com/holixground/\">홀릭스 그라운드</a>라는 멋진 곳에서 크로스핏을 다시 시작했습니다.\n하루중에 걱정고민 없이 운동에만 집중할 수 있는 시간을 만들어주는 곳이라 정이 많이 갑니다.\n개발자가 된 뒤로 성향이 ENFP에서 INFP로 바뀌는 바람에(?) 비록 많은 분들과 친해지진 못햇지만, 2022년엔 함께 운동하는 사람들과 더 즐겁게 운동하고 싶다는 소박한 목표(?)도 생겼습니다.\n다치지 않고 즐겁게 운동하고 싶습니다 :))</p>\n<br/>\n<h2 id=\"6-올해의-반성\" style=\"position:relative;\"><a href=\"#6-%EC%98%AC%ED%95%B4%EC%9D%98-%EB%B0%98%EC%84%B1\" aria-label=\"6 올해의 반성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. 올해의 반성</h2>\n<ul>\n<li>방향이 명확한 사람이 되고 싶습니다.</li>\n</ul>\n<p>회사에서는 프론트와 백엔드 업무를 모두 맡고 있기에 양쪽에 어중간하게 발을 걸치고 있습니다.\n상반기와 중반만 해도 프론트엔드를 더 깊게 공부하고 있었는데, 하반기가 되면서 백엔드에 더 시간을 많이 쏟자고 마음을 잡았습니다.\n방향이 명확해지니 행동에도 변화가 생겼습니다. 자바 기본서와 스프링 책을 더 깊게 읽게 됐고, DB와 SQL 에도 시간을 더 할애했습니다.\n개인 공부시간도 눈에띄게 변화가 늘어났습니다.\n상반기에는 무작정 시간을 쏟기만 했다면, 하반기에는 뽀모도로로 공부시간을 체크하면서 시간에 밀도를 높이는데 집중했습니다.</p>\n<ul>\n<li>가시적인 결과물에 집중할 필요를 느꼈습니다.</li>\n</ul>\n<p>결과만큼 과정을 중시하는 삶을 살았습니다.\n<code class=\"language-text\">열심히 해왔잖아, 지금 결과가 좋지 않더라도 나중에는 빛을 발할꺼야</code> 라는 마인드가 마음 한켠에 늘 자리잡고 있었습니다.\n그런 마음이 항상 어중간한 결과를 가져왔다는 생각이 들었습니다.\n행동은 계획보다 강하지만, 행동 그 자체로 만족하지 않고 성과를 이끌어내는 삶을 살고 싶어졌습니다.\n이것저것 많은 일을 했던 2021년이었지만, 만족할만한 결과는 내지 못한 것은 분명 아쉬운 한 해였습니다.</p>\n<ul>\n<li>좋은 개발자이기 이전에 좋은 사람이 되고 싶습니다.</li>\n</ul>\n<p>개발자가 되기 전엔, 여러 대외활동을 하면서 다양한 사람들을 만났지만 크게 누군가와 다투거나 마음이 상했던 적은 드물었습니다.\n적당히 타협할 줄 알았고, 적당히 거리를 유지하면서 모두와 사이좋게 지내는 원만한 관계를 유지하며 살았습니다.\n그래서 저는 협업과 커뮤니케이션에 강점이 있는 사람이라고 <code class=\"language-text\">착각</code> 하며 살았습니다.\n실제로 개발자가 되어 협업을 해보니 내가 말을 이렇게 못했나 싶을 정도로 더듬을 때도 많았고, 의견 조율이 쉽지 않아 목소리가 높아졌던 부끄러운 기억도 많은 2021년이었습니다.</p>\n<h2 id=\"7-마무리\" style=\"position:relative;\"><a href=\"#7-%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"7 마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7. 마무리</h2>\n<p>항상 마무리가 쉽지 않습니다.\n2022년의 저는 어떻게 살아갈지 쉽사리 목표를 정하지 못하겠습니다. 목표를 정하더라도 올해 연말이 됐을 때, 목표를 이루지 못했을까봐 두려운 마음이 드는 것도 사실입니다.\n그럼에도 한가지 목표를 정해야 한다면, 올해는 꼭 목표한 기업으로 이직 하고 싶습니다. 환경의 중요성도 뼈저리게 느낀 한 해였던 만큼, 깊게 배우고 느낄 수 있는 곳에서 또 피터지게 살아가고 싶습니다.\n개발자로 평생 살아갈 수 있을지 확신이 없어 두려운 것도 사실이지만, 지금 이 순간에 최선을 다하다 보면 언젠가는 원하는 모습에 닿게 되리라고 믿습니다.</p>","frontmatter":{"date":"January 01, 2022","title":"1년차 개발자 2021년 회고","categories":"Retrospect","author":"Hoo","emoji":"🌿🤙🏻"},"fields":{"slug":"/hoo 2021/"}},"prev":{"id":"59131f27-6acd-5570-828b-5f2a6a725a57","html":"<p>아마존의 OTT <code class=\"language-text\">Prime Video</code> 의 결함 감지 서비스를 MSA에서 모놀리스 아키텍처로 마이그레이션한 사례입니다.\n보통은 모놀리스에서 MSA로 마이그레이션한 사례만 접했는데, 해당 사례는 역으로 마이그레이션 한 케이스라 흥미롭습니다.\n원문은 <a href=\"https://www.primevideotech.com/video-streaming/scaling-up-the-prime-video-audio-video-monitoring-service-and-reducing-costs-by-90\">🔗Prime Video 테크 블로그</a>에서 확인하실 수 있습니다.</p>\n<hr/>\n<br/>\n<blockquote>\n<p>분산형 마이크로서비스 아키텍처에서 모놀리스 애플리케이션으로 전환하여 더 높은 규모, 내구성을 달성하고 비용을 줄일 수 있었습니다.</p>\n</blockquote>\n<br/>\n<p>프라임 비디오(이하 프라임)에서는 수천개의 라이브 스트림을 고객에게 제공합니다.\n고객에게 원할하게 영상을 제공할 수 있도록 프라임에서는 고객이 시청하는 모든 영상을 모니터링 하고 있습니다.\n모니터링 툴 덕분에 인식 품질 문제 (예: 차단 손상 또는 오디오/비디오 동기화 문제) 를 자동으로 식별하고 이를 해결하기 위한 절차를 실행할 수 있습니다.</p>\n<p>프라임의 비디오 품질 분석 팀은 이미 오디오/비디오 품질 검사 도구를 보유하고 있지만, 대규모의 라이브 스트림을 모니터링 하도록 설계된 것은 아니었습니다.\n더 많은 영상 스트림을 서비스에 추가하는 과정에서 인프라를 대규모로 실행하는데 많은 비용이 든다는 사실을 알게 됐습니다.\n또한 수천개의 영상을 모니터링 하는데 방해되는 병목현상 역시 발견했습니다. 그래서 우리는 비용과 scailing 병목 현상에 초첨을 맞춰 기존 서비스의 아키텍처를 재검토 했습니다.</p>\n<p>프라임의 초기 버전은 AWS Step Functions 에 의해 오케스트레이션 되는 분산 서버로 구성되어 있었습니다.\n비용 측면에서 가장 비싼 두 가지 작업은 오케스트레이션 워크플로우와 분산된 구성 요소 간 데이터를 전달할 때 였습니다.\n이 문제를 해결하기 위해 모든 구성 요소를 Single Process 로 옮겨 프로세스 메모리 내에서 데이터 전송을 유지하여 오케스트레이션 로직도 간소화했습니다.\n모든 작업을 단일 프로세스로 컴파일한 덕분에 배포를 위해 확장 가능한 EC2 및 ECS 인스턴스에 의존할 수 있었습니다.</p>\n<br/>\n<h3 id=\"분산-시스템에서의-오버헤드\" style=\"position:relative;\"><a href=\"#%EB%B6%84%EC%82%B0-%EC%8B%9C%EC%8A%A4%ED%85%9C%EC%97%90%EC%84%9C%EC%9D%98-%EC%98%A4%EB%B2%84%ED%97%A4%EB%93%9C\" aria-label=\"분산 시스템에서의 오버헤드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>분산 시스템에서의 오버헤드</h3>\n<p>프라임은 세 가지 주요 구성 요소로 이루어져있습니다. 미디어 변환기는 입력 오디오/비디오 스트림을 프레임 또는 해독된 오디오 버퍼로 변환하여 Detector 로 전송합니다.\nDefect Detector 는 프레임과 오디오 버퍼를 실시간으로 분석하여 결함(비디오 정지, 블록 손상 또는 오디도/비디오 동기화 문제 등) 을 탐지하고 결합이 발견될 때마다 실시간 알림을 보냅니다.\n이 내용에 대한 자세한 내용은 ”<a href=\"https://www.primevideotech.com/computer-vision/how-prime-video-uses-machine-learning-to-ensure-video-quality\">프라임 비디오가 머신 러닝을 사용하여 동영상 품질을 보장하는 방법</a>” 문서를 참조하세요.\n세 번째 구성 요소는 서비스 내의 흐름을 제어하는 오케스트레이션을 제공합니다.</p>\n<p>프라임의 초기 솔루션은 서버리스 컴포넌트(AWS Step Functions 나 AWS Lambda)를 사용하는 분산 시스템으로 설계했는데, 이는 빠르게 서비스를 구축하는데엔 적절한 선택이었습니다.\n이론적으로는 각 서비스 컴포넌트를 독립적으로 확장할 수 있었지만, 일부 컴포넌트의 사용 방법으로 인해 예상 부하의 5% 정도 규모에서 한계에 부딪혔습니다.\n또한 모든 구성 요소의 전체 비용이 너무 높아 대규모 솔루션으로 적용하기에는 무리였습니다.</p>\n<p>아래 다이어그램은 프라임의 서버리스 아키텍처입니다. <br/></p>\n<p><em>📌 Defect Detection 시스템의 초기 아키텍처</em>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 79.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC/klEQVQ4y2WUu47cNhSGp0iTKk2eJ1XewGnSpki6PIABI5XhAEmRJo2NXB7BWPhSxLkWARwDjuHcdmfXu7OzE81II1GkKFKkRPILpFljLznAAQke6j/n/P+hZgAppQuPkXjJRzPGImo57YfaYM4qfN/jnCfGxGWbTZf6fvKYIj4MiFpM3jTNdClbbzg4PCKRkEVFsfh3Agwh0miNUhIhBH3f7wDHOqY8fSB1PWEYiEOYnJhojaeSFmssJycnLBanSFETQ8TaDq31lHzscBa8RW+OiATMg5eoTx/Rtw5fKHypcbnCLQ+wx78RTYsfY60lWI83HW2prrZsnu9Rf/I25vdv0SpiCoF1Dq1bWmNwfUTfew93600Q8/PPdrxFEla2EONEx1Rh9fdTll99hNz/iX6AGALWWuq6RjUNIUJ+/w753fcZZLaDG8VKiRAjRuqJlnQu7qztHFml6YZI7DwpRK6b1IaNUKRr5zGl/wNOKjvPep3R1g3B9+i8ppENWiqUUJPKq/kCcZyhK0lTCFRRY1qLVe1VwBAHtjJHNYrQD3SZYP3hN+TPl2SHknyesc63nN19wub2HvlZTX4iKBYbVCmxjTnn8BwwUyu+mz9gIV6RuoApBWXeUjx7SH3/Y6rVX4jKUC5zymzL9vEd6h9vU1WCegS8XqF2Dc+Wv6I6SXQDnZBUPaz3PkfdfItq/wfK0lBlOduyIvvsXeov32FbbNF1e857uFBZScX8YE6jGhgiXa0RleJ0fsD86S+sVyuq0lDmhrKoOXz5gld/vqDYlLSiIboewoVcM+ccSimcd1NwFMXrDqcdtu136+IP9DhWUuJtoLcDve6ml5TcgO87aisIMexUfm2DvT42u8zm3g38zTdI1T4B6DqD7/1URNCe4/yQJ0ePyNQZs9d/mQlw5CNencMxkj/8guzrD/BqPb37sio5W62QjSJ1A4VY8/M/36NtM1Z4CdA4hsYSjCO0blqdasmzktOTNU0pSWMXXc/QdkTria2j2paTDko1/AfkFr0tGLqDWgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img.png\"\n        title=\"img.png\"\n        src=\"/static/6499be188726d9255311ea75bf9d496b/37523/img.png\"\n        srcset=\"/static/6499be188726d9255311ea75bf9d496b/e9ff0/img.png 180w,\n/static/6499be188726d9255311ea75bf9d496b/f21e7/img.png 360w,\n/static/6499be188726d9255311ea75bf9d496b/37523/img.png 720w,\n/static/6499be188726d9255311ea75bf9d496b/6bfd0/img.png 1011w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>위 아키텍처에서 주요 확장 병목은 AWS Step Functions 로 구현된 오케스트레이션 관리였습니다. 우리 서비스는 스트림의 매초마다 여러 상태 전환을 수행하기 때문에 빠르게 계정한도(Account Limit)에 도달했습니다.\n게다가 AWS Step Functions 는 상태 전이 마다 사용자에게 요금을 부과합니다.</p>\n<p>두 번째로 발견한 비용 문제는 비디오 프레임을 여러 컴포넌트에 전달하는 방식이었습니다. 연산 비용이 높은 비디오 변환 작업을 줄이기 위해, 비디오를 프레임으로 분할하고 일시적으로 이미지를 S3 버킷에 업로드 하는 마이크로서비스를 구축했습니다.\n이후 Defect detectors 는(각각 별도의 마이크로서비스로 실행됨) 이미지를 다운받고 AWS Lambda 를 사용하여 동시에 처리합니다. 그러나 S3 버킷에 Tier-1 호출 수가 많아짐에 따라 비용 역시 높아졌습니다.</p>\n<br/>\n<h3 id=\"마이크로-서비스에서-모놀리스-애플리케이션까지\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%9D%B4%ED%81%AC%EB%A1%9C-%EC%84%9C%EB%B9%84%EC%8A%A4%EC%97%90%EC%84%9C-%EB%AA%A8%EB%86%80%EB%A6%AC%EC%8A%A4-%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98%EA%B9%8C%EC%A7%80\" aria-label=\"마이크로 서비스에서 모놀리스 애플리케이션까지 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마이크로 서비스에서 모놀리스 애플리케이션까지</h3>\n<p>병목 현상을 해결하기 위해, 먼저 개별적으로 문제를 해결하여 비용을 절감하고 확장 가능성을 높일 수 있는 방법을 고려했습니다. 고심끝에 대담한 결정을 내리게 됐습니다. 인프라를 재설계하기로 결정한 것입니다.</p>\n<p>분산 서버 환경이 우리의 케이스(Defect Detection)에 그다지 큰 이점이 없다는걸 깨달았기에 모든 구성 요소를 단일 프로세스로 통합했습니다.\n이로써 데이터 전송이 메모리 내에서 처리되므로 비디오 프레임의 중간 저장소인 S3 버킷이 필요하지 않게 됐습니다. 또한 단일 인스턴스 내에서 컴포넌트를 제어하는 오케스트레이션을 구현했습니다.\n아래의 다이어그램은 모놀리스 애플리케이션으로 마이그레이션 된 시스템 아키텍처 입니다. <br/></p>\n<p><em>📌 모든 컴포넌트가 단일 ECS 내에서 실행되는 시스템으로 업데이트된 아키텍처</em>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.22222222222222%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACF0lEQVQoz3WTS08TURTH+4H8In4BQ7owAdLGuBLduNOliUYXJmxcgAYT4wJfMSBiSIxoUAqIoCDQ2qZVSmf6Zu6d+/qZmaHlPcmZ3Jz/vb9z7jnnppxznPdprenpzjqctn3tvHOp6GeMOWbW2hhW+FNCCJnA9yWN/D8CKTHGHoMehfeBzppY6IkRcLdaJVQq9tVqNcrlMn69jrGHwJOZpiKHdRC5bbx28brb7eL5dbROAkkpEUIgpKTRbOJ5HmEYnp2h8oqo3DjYAGQDXLJRin2wiiRccshqiQw6qKCJNeo0cM/zsaLF1MRDBgYuMTx4maGhQbLZLCMj17h6JUtmeJBMJkM6nWZsbDwBK4E7AuxZSimNMZpmo0sxX6FcqvBjbZ1CPs9WsULud5n55V/klpYoFPJxXbU1GJ0A3Ulg3IBQsFnKsVH7Tl3WaDcatDQ8mFrlyeQb7j17x/SGf2pEelfulaNfQx1KHi/e4eZsmtc/J2Kh2IXbd++zcOMC49cvMjq7TtPz+bIzx9utp3wtzrDfaVOtVmm32hT8HSqtUgJ0RhPKDkEYoA6iNqXj+ccVPky/5MXUDPPbtTiR2e1JRr/d4tXaI5w2yKjTDpZLi6z/XU2AUeoR9OhIiSCgurfHbqNLKwjPfBWuf2XiOfU9/xBoZCeupZZBbNHmna1N5t5Ps/D5E+GBzyiB1gIt2jh92JToISil+A92wIN5en9DuQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_1.png\"\n        title=\"img_1.png\"\n        src=\"/static/bd59b8821ffb44b26e44d10589958831/37523/img_1.png\"\n        srcset=\"/static/bd59b8821ffb44b26e44d10589958831/e9ff0/img_1.png 180w,\n/static/bd59b8821ffb44b26e44d10589958831/f21e7/img_1.png 360w,\n/static/bd59b8821ffb44b26e44d10589958831/37523/img_1.png 720w,\n/static/bd59b8821ffb44b26e44d10589958831/302a4/img_1.png 1080w,\n/static/bd59b8821ffb44b26e44d10589958831/afa26/img_1.png 1258w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n<br/></p>\n<p>개념적으로 High-level 의 아키텍처는 그대로 유지됐습니다. 미디어 변환, Detector, 오케스트레이션 등 초기 설계와 동일한 컴포넌트로 이루어져 있습니다.\n덕분에 많은 코드를 재사용하고 새로운 아키텍처로 빠르게 마이그레이션 할 수 있었습니다,.</p>\n<p>초기 설계에서는 여러 개의 탐지기가 각각 별도의 마이크로 서비스로 실행됐기 때문에 수평적으로 확장이 가능했습니다. (새 탐지기를 추가하려면 새로운 마이크로 서비스를 생성하여  오케스트레이션에 연결해야 했습니다).\n그러나 개선된 아키텍처에서는 모든 탐지기가 동일한 인스턴스 내에서 실행되기 때문에 탐지기의 수가 수직적으로만 확장됩니다. 프라임 팀에서는 지속적으로 새로운 탐지기를 추가하고 있으며, 이미 단일 인스턴스의 용량을 초과했습니다.\n이 문제를 해결하기 위해 각 복제본을 다른 하위 집합의 탐지기로 매개변수화 하여 서비스를 여러 번 복제했습니다. 또한 고객 요청을 분산하기 위해 경량 오케스트레이션 레이어를 구현했습니다.</p>\n<p>아래 다이어그램은 단일 인스턴스의 용량이 초과될 때 탐지기를 배포하는 솔루션입니다. <br/></p>\n<p><em>📌 새로운 탐지기를 배포할 때 접근방식</em>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 111.11111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAAsTAAALEwEAmpwYAAADIUlEQVQ4y42US6/bRBTHs+IzoH4vvgcSGzZdsWHDR2DFCgmkUlWqACEhKrUq4nXb5BInN3FeN4ljOzOeGdvz/qMZJ7lJ76XqkUYe2+Pf+Z+HTw8AvPfhAuccrLX3VrDb9RbJeBLPBGuXJcgfU0ipoLSG1iY+750DdXyh7wGNsZgvb5GMp2jaNp6l6xy70QLlnkAbA8p4dNYLsCPQGHPan5vRGhWl4IxBSYlZOsPLVy9x9fYN+v0+KKVoWglrXafwaEHNMaRzR7u8wHSVoT34apoaRVGAEIKqquC9g6gb2KAwAIQQ4JyjaZoTJF4DNEpsoacvIAZPAb7CQ3ahcLvdYjqdRnDw5p3tFLquIGbzL9jjR1Cf9+BffNkBBANj7CSG0KrL4dGD8x7WGlxk8FisdYLtpx+DfvYR7G9fnYBlWSJNU5Tl/g54lyuPUHg9ewVz/R20KKBYBsV20HQN8ecT5L9+DXrzGrKp4NoKTlaQvISTNFbfHhVGoLMIAVbPvkD9zScw9R6KrqHoBkq2UADmhcAoXaCumy6AYzHbKobtnL/sw9AeimTQNINpGUxDoZoKpNiipjtwkoOWGTgNqjisFLCqgakLiLq+y+GpsZWCFiWs5B2MrsE3IzCSwzV7GJ7BGwlWkai82SRxSbK4a5tzYGhali/hlegSP/wFapvE0Iwoo7NgcjdBc/3zoW4O9X4JLurIuQB65+KHIZzQ3uTqOfj8Ku47YNH9dosB8t+/h1QK3hm0ZHXqiAeBXoqY+NEkxfhmAsYFbL2PhQr7ZHyDwXCM4TCBEAyK3kalDwBtBBq2Q7acYNz/C4vxAMVmDl1l0DyHbiqw/RarNAHJ19ANgSSr+0B/aGQbq0tiUZxksddMS+OHLcvRRnABU5dxySqDZPllyOcqT/fvDIguAoBzgclkivl8gWQ0wmw2j+PryLgM+QA4X8dK7kWJjGzhvEUtQo5r1LWA1upCUA//Y+dAZSSeD3/AT8kzpOXNg2cvFH4I9MfkKZ70v0Ul6WGYuHei8O8Hnh8O/+k/13/jejQAq9i99+f2wcAw9tNpGif0+4D/AdpCofh7MnMRAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img_2.png\"\n        title=\"img_2.png\"\n        src=\"/static/9d30f6af72fb47fd3143baa1e4c76300/37523/img_2.png\"\n        srcset=\"/static/9d30f6af72fb47fd3143baa1e4c76300/e9ff0/img_2.png 180w,\n/static/9d30f6af72fb47fd3143baa1e4c76300/f21e7/img_2.png 360w,\n/static/9d30f6af72fb47fd3143baa1e4c76300/37523/img_2.png 720w,\n/static/9d30f6af72fb47fd3143baa1e4c76300/a0209/img_2.png 725w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br/>\n<h3 id=\"결과와-시사점\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EA%B3%BC%EC%99%80-%EC%8B%9C%EC%82%AC%EC%A0%90\" aria-label=\"결과와 시사점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결과와 시사점</h3>\n<p>마이크로서비스와 서버리스 컴포넌트는 대규모 서비스에서 잘 동작하는 아키텍처지만, 모놀리스 서비스를 대신하여 사용할지 여부는 케이스에 따라 결정해야 합니다.\n모놀리스 서비스로 전환하면서 인프라 비용이 90% 이상 절감됐고 스케일링 기능도 향상시켰습니다. 현재 수천개의 스트림을 처리할 수 잇으며 서비스를 더욱 확장할 수 용량을 확보하고 있습니다.\nEC2와 ECS 로 이전함으로써 EC2 Computing 절약 요금제를 사용할 수 있어 더 높은 비용 절감을 기대할 수 있습니다.</p>\n<p>우리가 내린 몇 가지 결정 중 분명하지 않은 점도 있지만 명확한 개선점을 가져왔습니다.\n예를 들어, Computing 비용이 많이 드는 미디어 변환 프로세스를 복제하여 탐지기에 더 가까운 곳에 배치했습니다. 미디어 변환을 한 번만 실행하고 결과를 캐싱하는 방법을 비용 측면에서 괜찮은 옵션으로 간주할 수도 있지만,\n우리는 이것이 비용 효율적인 접근 방식이 아니라는 것을 알게 됐습니다.</p>\n<p>이로써 프라임 비디오는 시청자 수가 가장 많은 영상 뿐 아니라, 유저들이 시청하는 모든 스트림을 모니터링 할 수 있는 시스템으로 개선되어 더 높은 품질과 나은 고객 경험을 제공할 수 있게 됐습니다.</p>","frontmatter":{"date":"May 07, 2023","title":"Prime Video 서비스의 오디오/비디오 모니터링 서비스 확장 및 비용 절감 90% 사례","categories":"Architecture","author":"Hoo","emoji":"🌿🤙🏻"},"fields":{"slug":"/Scailing up the Prime Video/"}},"site":{"siteMetadata":{"siteUrl":"https://www.zoomkoding.com","comments":{"utterances":{"repo":""}}}}},"pageContext":{"slug":"/Springboot 원리/","nextSlug":"/hoo 2021/","prevSlug":"/Scailing up the Prime Video/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}